BRISBANE_CLIP:=151.511 -28.604 153.645 -26.058
SYDNEY_CLIP:=149.6880 -35.5642 152.0675 -32.8917
MELBOURNE_CLIP:=142.9141 -39.2314 146.7691 -35.699
AUSTRALIA_CLIP:=111.685 -44.914 155.571 -10.066
SIMPLIFY:=0.0001

all:
	$(MAKE) clip IN=SA4_2021_AUST_SHP_GDA2020 OUT=SA4_2021_AUSTRALIA_GDA2020.json EXTENT="$(AUSTRALIA_CLIP)" SIMPLIFY=0.001
	$(MAKE) clip IN=SA4_2021_AUST_SHP_GDA2020 OUT=SA4_2021_BRISBANE_GDA2020.json EXTENT="$(BRISBANE_CLIP)"
	$(MAKE) clip IN=SA4_2021_AUST_SHP_GDA2020 OUT=SA4_2021_SYDNEY_GDA2020.json EXTENT="$(SYDNEY_CLIP)"
	$(MAKE) clip IN=SA4_2021_AUST_SHP_GDA2020 OUT=SA4_2021_MELBOURNE_GDA2020.json EXTENT="$(MELBOURNE_CLIP)"

clip:
	ogr2ogr -f GeoJSON $(OUT) $(IN) -clipsrc $(EXTENT) -simplify $(SIMPLIFY)
	python3 clean-json.py $(OUT) $(OUT)


SA4_2021_BRISBANE_GDA2020.json:	SA4_2021_AUST_GDA2020.json
	ogr2ogr -f GeoJSON $@ $< -clipsrc $(BRISBANE_CLIP) 
	python3 clean-json.py $@ $@

test2:
	ogr2ogr -f GeoJSON SA4_2021_BRISBANE_GDA2020.json SA4_2021_AUST_SHP_GDA2020 -clipsrc $(BRISBANE_CLIP) -simplify 0.0001

# python3 clean-json.py SA4_2021_BRISBANE_GDA2020.json SA4_2021_BRISBANE_GDA2020.json
